{
  "timestamp": "2026-01-05T00:52:39.052063",
  "tests_run": 48,
  "tests_passed": 47,
  "success_rate": 97.91666666666666,
  "results": [
    {
      "test": "Authenticate User 1",
      "success": true,
      "details": "User ID: 676ee695-a0ac-42e2-8dd8-dec3bbbd34b1"
    },
    {
      "test": "Authenticate User 2",
      "success": true,
      "details": "User ID: ac98a7d0-ab57-4c03-9448-e2c6ce8edb42"
    },
    {
      "test": "Activate Qatar album for User 1",
      "success": false,
      "details": "Status: 400, Response: {'detail': 'Album already activated'}"
    },
    {
      "test": "Get Qatar stickers",
      "success": true,
      "details": "Found 100 stickers"
    },
    {
      "test": "Setup mutual match inventory",
      "success": true,
      "details": "User 1 has 1-5 duplicates, User 2 has 6-10 duplicates"
    },
    {
      "test": "Create exchange",
      "success": true,
      "details": "Exchange ID: 2d4b5704-68e9-4ed6-86b8-367c9329b6be"
    },
    {
      "test": "Exchange status is pending",
      "success": true,
      "details": "Status: pending"
    },
    {
      "test": "Exchange users correct",
      "success": true,
      "details": "User A: 676ee695-a0ac-42e2-8dd8-dec3bbbd34b1, User B: ac98a7d0-ab57-4c03-9448-e2c6ce8edb42"
    },
    {
      "test": "Exchange offers exist",
      "success": true,
      "details": "User A offers: 5, User B offers: 5"
    },
    {
      "test": "Duplicate exchange blocked",
      "success": true,
      "details": "Correctly blocked: {'detail': 'Exchange already exists'}"
    },
    {
      "test": "Get User 1 exchanges",
      "success": true,
      "details": "Found 1 exchanges"
    },
    {
      "test": "Exchange found in User 1 list",
      "success": true,
      "details": "Exchange not found in list"
    },
    {
      "test": "Partner info included",
      "success": true,
      "details": "Partner info missing"
    },
    {
      "test": "is_user_a flag correct for User 1",
      "success": true,
      "details": "is_user_a: True"
    },
    {
      "test": "Get User 2 exchanges",
      "success": true,
      "details": "Found 1 exchanges"
    },
    {
      "test": "is_user_a flag correct for User 2",
      "success": true,
      "details": "is_user_a: False"
    },
    {
      "test": "Get exchange detail",
      "success": true,
      "details": "Exchange ID: 2d4b5704-68e9-4ed6-86b8-367c9329b6be"
    },
    {
      "test": "All required fields present",
      "success": true,
      "details": "Missing fields: []"
    },
    {
      "test": "Sticker details enriched",
      "success": true,
      "details": "Sticker details missing"
    },
    {
      "test": "Unauthorized access blocked",
      "success": true,
      "details": "Correctly blocked: {'detail': 'Not authorized'}"
    },
    {
      "test": "Get exchange chat",
      "success": true,
      "details": "Chat ID: ae12d7bd-83a0-4757-ae37-fb249e52a945"
    },
    {
      "test": "System message exists",
      "success": true,
      "details": "No system message found"
    },
    {
      "test": "Chat is not read-only",
      "success": true,
      "details": "is_read_only: False"
    },
    {
      "test": "Send chat message",
      "success": true,
      "details": "Message ID: cd200ace-2c5e-42af-ad49-5c1b1863ecca"
    },
    {
      "test": "Message fields correct",
      "success": true,
      "details": "Message: {'id': 'cd200ace-2c5e-42af-ad49-5c1b1863ecca', 'chat_id': 'ae12d7bd-83a0-4757-ae37-fb249e52a945', 'sender_id': '676ee695-a0ac-42e2-8dd8-dec3bbbd34b1', 'content': \"Hello! Let's coordinate our exchange.\", 'is_system': False, 'created_at': '2026-01-05T00:52:38.497753+00:00'}"
    },
    {
      "test": "User 2 sends reply",
      "success": true,
      "details": "Reply sent successfully"
    },
    {
      "test": "Both user messages in chat",
      "success": true,
      "details": "Found 2 user messages"
    },
    {
      "test": "User 1 confirms thumbs up",
      "success": true,
      "details": "Response: {'message': 'Confirmation recorded', 'status': 'pending'}"
    },
    {
      "test": "Status still pending after one confirmation",
      "success": true,
      "details": "Status: pending"
    },
    {
      "test": "Duplicate confirmation blocked",
      "success": true,
      "details": "Correctly blocked: {'detail': 'Already confirmed'}"
    },
    {
      "test": "User 2 confirms thumbs up",
      "success": true,
      "details": "Response: {'message': 'Confirmation recorded', 'status': 'completed'}"
    },
    {
      "test": "Exchange status completed",
      "success": true,
      "details": "Status: completed"
    },
    {
      "test": "Chat is now read-only",
      "success": true,
      "details": "is_read_only: True"
    },
    {
      "test": "Completion system message added",
      "success": true,
      "details": "No completion message found"
    },
    {
      "test": "Message to closed chat blocked",
      "success": true,
      "details": "Correctly blocked: {'detail': 'Chat is closed for this exchange'}"
    },
    {
      "test": "Get User 1 reputation",
      "success": true,
      "details": "Status: trusted"
    },
    {
      "test": "Reputation fields present",
      "success": true,
      "details": "Missing: []"
    },
    {
      "test": "Exchange recorded in reputation",
      "success": true,
      "details": "Total exchanges: 1"
    },
    {
      "test": "Successful exchange recorded",
      "success": true,
      "details": "Successful exchanges: 1"
    },
    {
      "test": "Reputation status is trusted",
      "success": true,
      "details": "Status: trusted"
    },
    {
      "test": "Get User 2 reputation",
      "success": true,
      "details": "Status: trusted"
    },
    {
      "test": "User 2 exchange recorded",
      "success": true,
      "details": "Total exchanges: 1"
    },
    {
      "test": "User 2 successful exchange recorded",
      "success": true,
      "details": "Successful exchanges: 1"
    },
    {
      "test": "Create second exchange",
      "success": true,
      "details": "Exchange ID: 7f62f514-b5de-4fa9-a698-c34c4c72d4f8"
    },
    {
      "test": "User 2 confirms thumbs down",
      "success": true,
      "details": "Response: {'message': 'Confirmation recorded', 'status': 'failed'}"
    },
    {
      "test": "Exchange failed immediately",
      "success": true,
      "details": "Status: failed"
    },
    {
      "test": "User 1 failed exchange recorded",
      "success": true,
      "details": "Failed exchanges: 1"
    },
    {
      "test": "User 2 failed exchange recorded",
      "success": true,
      "details": "Failed exchanges: 1"
    }
  ],
  "exchange_id": "2d4b5704-68e9-4ed6-86b8-367c9329b6be",
  "user1_id": "676ee695-a0ac-42e2-8dd8-dec3bbbd34b1",
  "user2_id": "ac98a7d0-ab57-4c03-9448-e2c6ce8edb42"
}