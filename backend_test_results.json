{
  "timestamp": "2026-01-25T00:05:04.314855",
  "tests_run": 43,
  "tests_passed": 42,
  "success_rate": 97.67441860465115,
  "results": [
    {
      "test": "Send OTP - Valid Email",
      "success": true,
      "details": ""
    },
    {
      "test": "Send OTP - Response has message",
      "success": true,
      "details": "Missing 'message' field"
    },
    {
      "test": "Send OTP - Response has email",
      "success": true,
      "details": "Missing or incorrect 'email' field"
    },
    {
      "test": "Send OTP - OTP not exposed",
      "success": true,
      "details": "OTP should not be in response"
    },
    {
      "test": "Send OTP - Invalid Email Format",
      "success": false,
      "details": "Status: 200, Response: {'message': 'OTP sent', 'email': 'invalid-email'}"
    },
    {
      "test": "Verify OTP - Valid Code",
      "success": true,
      "details": ""
    },
    {
      "test": "Verify OTP - Response has token",
      "success": true,
      "details": "Missing 'token' field"
    },
    {
      "test": "Verify OTP - Response has user",
      "success": true,
      "details": "Missing 'user' field"
    },
    {
      "test": "Verify OTP - User has onboarding_completed field",
      "success": true,
      "details": "Missing 'onboarding_completed' field"
    },
    {
      "test": "Verify OTP - New user onboarding_completed is false",
      "success": true,
      "details": "onboarding_completed should be false for new users"
    },
    {
      "test": "Verify OTP - Invalid Code",
      "success": true,
      "details": "Correctly rejected invalid OTP"
    },
    {
      "test": "Verify OTP - Non-existent Email",
      "success": true,
      "details": "Correctly rejected non-existent email"
    },
    {
      "test": "GET /auth/me - Valid Token",
      "success": true,
      "details": ""
    },
    {
      "test": "GET /auth/me - Response has id",
      "success": true,
      "details": "Missing 'id' field"
    },
    {
      "test": "GET /auth/me - Response has email",
      "success": true,
      "details": "Missing 'email' field"
    },
    {
      "test": "GET /auth/me - Response has onboarding_completed",
      "success": true,
      "details": "Missing 'onboarding_completed' field"
    },
    {
      "test": "GET /auth/me - No Token",
      "success": true,
      "details": "Correctly rejected request without token"
    },
    {
      "test": "Complete Onboarding - Valid Data",
      "success": true,
      "details": ""
    },
    {
      "test": "Complete Onboarding - Response has message",
      "success": true,
      "details": "Missing 'message' field"
    },
    {
      "test": "Complete Onboarding - Response has user",
      "success": true,
      "details": "Missing 'user' field"
    },
    {
      "test": "Complete Onboarding - User onboarding completed",
      "success": true,
      "details": "onboarding_completed should be true"
    },
    {
      "test": "Complete Onboarding - User full name set",
      "success": true,
      "details": "full_name not set correctly"
    },
    {
      "test": "Complete Onboarding - User location set",
      "success": true,
      "details": "location not set correctly"
    },
    {
      "test": "Complete Onboarding - User terms accepted",
      "success": true,
      "details": "terms_accepted should be true"
    },
    {
      "test": "Complete Onboarding - Already Completed",
      "success": true,
      "details": "Correctly rejected re-onboarding"
    },
    {
      "test": "Complete Onboarding - Valid Radius Values",
      "success": true,
      "details": "Valid values: [3, 5, 10, 15, 20]"
    },
    {
      "test": "GET /albums/{album_id}/exchanges",
      "success": true,
      "details": ""
    },
    {
      "test": "Exchanges response is list",
      "success": true,
      "details": "Response should be a list"
    },
    {
      "test": "Exchanges empty for new user",
      "success": true,
      "details": "New user should have no existing exchanges"
    },
    {
      "test": "GET /albums/{album_id}/matches",
      "success": true,
      "details": ""
    },
    {
      "test": "Matches response is list",
      "success": true,
      "details": "Response should be a list"
    },
    {
      "test": "Matches empty for new user",
      "success": true,
      "details": "New user with no inventory should have no matches"
    },
    {
      "test": "GET /albums/{album_id} (Album Detail)",
      "success": true,
      "details": ""
    },
    {
      "test": "Album detail has exchange_count",
      "success": true,
      "details": "Missing 'exchange_count' field"
    },
    {
      "test": "Album detail has pending_exchanges",
      "success": true,
      "details": "Missing 'pending_exchanges' field"
    },
    {
      "test": "Album detail has has_unread_exchanges",
      "success": true,
      "details": "Missing 'has_unread_exchanges' field"
    },
    {
      "test": "exchange_count is integer",
      "success": true,
      "details": "exchange_count should be an integer"
    },
    {
      "test": "pending_exchanges is integer",
      "success": true,
      "details": "pending_exchanges should be an integer"
    },
    {
      "test": "has_unread_exchanges is boolean",
      "success": true,
      "details": "has_unread_exchanges should be a boolean"
    },
    {
      "test": "Exchange count matches matches endpoint",
      "success": true,
      "details": "Matches count (0) != exchange_count (0)"
    },
    {
      "test": "New user exchange values correct",
      "success": true,
      "details": "Expected all 0/false, got: exchange_count=0, pending_exchanges=0, has_unread_exchanges=False"
    },
    {
      "test": "Matches after inventory update",
      "success": true,
      "details": "Found 2 matches"
    },
    {
      "test": "Exchange count still matches after inventory update",
      "success": true,
      "details": "Updated matches count (2) != updated exchange_count (2)"
    }
  ],
  "test_email": "misfigus.auth.test.20260125000501@gmail.com",
  "token_obtained": true
}